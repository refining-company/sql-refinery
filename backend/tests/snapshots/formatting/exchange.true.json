{
  "0": {
    "data": {
      "id": 0,
      "jsonrpc": "2.0",
      "method": "initialize",
      "params": {
        "capabilities": {
          "textDocument": {
            "formatting": { "dynamicRegistration": true } } },
        "processId": 1,
        "rootUri": "inputs",
        "workspaceFolders": [] } },
    "direction": "client->server",
    "method": "initialize" },
  "1": {
    "data": {
      "jsonrpc": "2.0",
      "method": "initialized",
      "params": {} },
    "direction": "client->server",
    "method": "initialized" },
  "2": {
    "data": {
      "jsonrpc": "2.0",
      "method": "textDocument/didOpen",
      "params": {
        "textDocument": {
          "languageId": "sql",
          "text": "-- CASE: Different groupings or thresholds applied to columns\nSELECT date(date_month, 'start of year') AS date_year, CASE WHEN c.region IN ('Americas') THEN 'AMER' WHEN c.region IN ('Europe', 'Africa') THEN 'EMEA' WHEN c.region = 'Asia' THEN 'APAC' ELSE NULL END AS macro_region, IIF(a.industry = 'Information Technology', 'IT', 'Non-IT') AS industry_it, SUM(ar.revenue) AS revenue, COUNT(DISTINCT ar.account_id) AS accounts, SUM(ar.revenue) / COUNT(DISTINCT ar.account_id) AS revenue_per_account FROM accounts_revenue ar LEFT JOIN accounts a USING (account_id) LEFT JOIN countries c USING (country) WHERE a.industry IN ('Information Technology', 'Telecommunication Services') AND date_month BETWEEN DATE('now', '-24 months') AND DATE('now') GROUP BY date_year, macro_region, industry_it",
          "uri": "unformatted.sql",
          "version": 1 } } },
    "direction": "client->server",
    "method": "textDocument/didOpen" },
  "3": {
    "direction": "server->client",
    "method": "sql-refinery/variations",
    "params": {
      "uri": "unformatted.sql",
      "variations": [] },
    "type": "notification" },
  "4": {
    "data": {
      "id": 1,
      "jsonrpc": "2.0",
      "method": "textDocument/formatting",
      "params": {
        "options": {
          "insertSpaces": true,
          "tabSize": 4 },
        "textDocument": { "uri": "unformatted.sql" } } },
    "direction": "client->server",
    "method": "textDocument/formatting" },
  "5": {
    "data": [
      { "new_text": "/* CASE: Different groupings or thresholds applied to columns */\nSELECT\n  DATE(date_month, 'start of year') AS date_year,\n  CASE\n    WHEN c.region IN ('Americas')\n    THEN 'AMER'\n    WHEN c.region IN ('Europe', 'Africa')\n    THEN 'EMEA'\n    WHEN c.region = 'Asia'\n    THEN 'APAC'\n    ELSE NULL\n  END AS macro_region,\n  IF(a.industry = 'Information Technology', 'IT', 'Non-IT') AS industry_it,\n  SUM(ar.revenue) AS revenue,\n  COUNT(DISTINCT ar.account_id) AS accounts,\n  SUM(ar.revenue) / COUNT(DISTINCT ar.account_id) AS revenue_per_account\nFROM accounts_revenue AS ar\nLEFT JOIN accounts AS a\n  USING (account_id)\nLEFT JOIN countries AS c\n  USING (country)\nWHERE\n  a.industry IN ('Information Technology', 'Telecommunication Services')\n  AND date_month BETWEEN DATE('now', '-24 months') AND DATE('now')\nGROUP BY\n  date_year,\n  macro_region,\n  industry_it",
        "range": {
          "end": {
            "character": 0,
            "line": 2 },
          "start": {
            "character": 0,
            "line": 0 } } } ],
    "direction": "server->client",
    "method": "textDocument/formatting",
    "type": "response" },
  "6": {
    "data": {
      "jsonrpc": "2.0",
      "method": "textDocument/didClose",
      "params": {
        "textDocument": { "uri": "unformatted.sql" } } },
    "direction": "client->server",
    "method": "textDocument/didClose" },
  "7": {
    "data": {
      "id": 2,
      "jsonrpc": "2.0",
      "method": "shutdown" },
    "direction": "client->server",
    "method": "shutdown" },
  "8": {
    "data": {
      "jsonrpc": "2.0",
      "method": "exit" },
    "direction": "client->server",
    "method": "exit" } }