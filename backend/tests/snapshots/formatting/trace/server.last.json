{
  "000": {
    "data": {
      "id": 0,
      "jsonrpc": "2.0",
      "method": "initialize",
      "params": {
        "capabilities": {
          "textDocument": {
            "formatting": { "dynamicRegistration": true } } },
        "processId": 1,
        "rootPath": null,
        "rootUri": "file://{cwd}/tests/inputs",
        "workspaceFolders": [] } },
    "direction": "client->server" },
  "001": {
    "data": {
      "id": 0,
      "jsonrpc": "2.0",
      "result": {
        "capabilities": {
          "documentFormattingProvider": true,
          "executeCommandProvider": { "commands": [] },
          "positionEncoding": "PositionEncodingKind.Utf16",
          "textDocumentSync": {
            "change": 2,
            "openClose": true,
            "save": false },
          "workspace": {
            "fileOperations": {},
            "workspaceFolders": {
              "changeNotifications": true,
              "supported": true } } },
        "serverInfo": {
          "name": "sql-refinery-server",
          "version": "0.1-dev" } } },
    "direction": "server->client" },
  "002": {
    "data": {
      "jsonrpc": "2.0",
      "method": "initialized",
      "params": {} },
    "direction": "client->server" },
  "003": {
    "data": {
      "jsonrpc": "2.0",
      "method": "textDocument/didOpen",
      "params": {
        "textDocument": {
          "languageId": "sql",
          "text": "{contents}",
          "uri": "file://{cwd}/tests/inputs/unformatted.sql",
          "version": 1 } } },
    "direction": "client->server" },
  "004": {
    "data": {
      "jsonrpc": "2.0",
      "method": "sql-refinery/variations",
      "params": {
        "uri": "file://{cwd}/tests/inputs/unformatted.sql",
        "variations": [] } },
    "direction": "server->client" },
  "005": {
    "data": {
      "id": 1,
      "jsonrpc": "2.0",
      "method": "textDocument/formatting",
      "params": {
        "options": {
          "insertSpaces": true,
          "tabSize": 4 },
        "textDocument": { "uri": "file://{cwd}/tests/inputs/unformatted.sql" } } },
    "direction": "client->server" },
  "006": {
    "data": {
      "id": 1,
      "jsonrpc": "2.0",
      "result": [
        { "newText": "/* CASE: Different groupings or thresholds applied to columns */\nSELECT\n    DATE(date_month, 'start of year') AS date_year,\n    CASE\n        WHEN c.region IN ('Americas')\n        THEN 'AMER'\n        WHEN c.region IN ('Europe', 'Africa')\n        THEN 'EMEA'\n        WHEN c.region = 'Asia'\n        THEN 'APAC'\n        ELSE NULL\n    END AS macro_region,\n    IF(a.industry = 'Information Technology', 'IT', 'Non-IT') AS industry_it,\n    SUM(ar.revenue) AS revenue,\n    COUNT(DISTINCT ar.account_id) AS accounts,\n    SUM(ar.revenue) / COUNT(DISTINCT ar.account_id) AS revenue_per_account\nFROM accounts_revenue AS ar\nLEFT JOIN accounts AS a\n    USING (account_id)\nLEFT JOIN countries AS c\n    USING (country)\nWHERE\n    a.industry IN ('Information Technology', 'Telecommunication Services')\n    AND date_month BETWEEN DATE('now', '-24 months') AND DATE('now')\nGROUP BY\n    date_year,\n    macro_region,\n    industry_it",
          "range": {
            "end": {
              "character": 0,
              "line": 2 },
            "start": {
              "character": 0,
              "line": 0 } } } ] },
    "direction": "server->client" },
  "007": {
    "data": {
      "jsonrpc": "2.0",
      "method": "textDocument/didClose",
      "params": {
        "textDocument": { "uri": "file://{cwd}/tests/inputs/unformatted.sql" } } },
    "direction": "client->server" },
  "008": {
    "data": {
      "id": 2,
      "jsonrpc": "2.0",
      "method": "shutdown" },
    "direction": "client->server" },
  "009": {
    "data": {
      "id": 2,
      "jsonrpc": "2.0",
      "result": null },
    "direction": "server->client" },
  "010": null }