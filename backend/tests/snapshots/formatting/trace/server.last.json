{
  "000": {
    "direction": "client->server",
    "data": {
      "id": 0,
      "params": {
        "capabilities": {
          "textDocument": {
            "formatting": { "dynamicRegistration": true } } },
        "processId": 1,
        "rootPath": null,
        "rootUri": "file://{cwd}/tests/inputs",
        "workspaceFolders": [] },
      "method": "initialize",
      "jsonrpc": "2.0" } },
  "001": {
    "direction": "server->client",
    "data": {
      "id": 0,
      "jsonrpc": "2.0",
      "result": {
        "capabilities": {
          "positionEncoding": "PositionEncodingKind.Utf16",
          "textDocumentSync": {
            "openClose": true,
            "change": 2,
            "save": false },
          "documentFormattingProvider": true,
          "executeCommandProvider": { "commands": [] },
          "workspace": {
            "workspaceFolders": {
              "supported": true,
              "changeNotifications": true },
            "fileOperations": {} } },
        "serverInfo": {
          "name": "sql-refinery-server",
          "version": "0.1-dev" } } } },
  "002": {
    "direction": "client->server",
    "data": {
      "params": {},
      "method": "initialized",
      "jsonrpc": "2.0" } },
  "003": {
    "direction": "client->server",
    "data": {
      "params": {
        "textDocument": {
          "uri": "file://{cwd}/tests/inputs/unformatted.sql",
          "languageId": "sql",
          "version": 1,
          "text": "{contents}" } },
      "method": "textDocument/didOpen",
      "jsonrpc": "2.0" } },
  "004": {
    "direction": "server->client",
    "data": {
      "method": "sql-refinery/variations",
      "jsonrpc": "2.0",
      "params": {
        "uri": "file://{cwd}/tests/inputs/unformatted.sql",
        "variations": [] } } },
  "005": {
    "direction": "client->server",
    "data": {
      "id": 1,
      "params": {
        "textDocument": { "uri": "file://{cwd}/tests/inputs/unformatted.sql" },
        "options": {
          "tabSize": 4,
          "insertSpaces": true } },
      "method": "textDocument/formatting",
      "jsonrpc": "2.0" } },
  "006": {
    "direction": "server->client",
    "data": {
      "id": 1,
      "jsonrpc": "2.0",
      "result": [
        { "range": {
            "start": {
              "line": 0,
              "character": 0 },
            "end": {
              "line": 2,
              "character": 0 } },
          "newText": "/* CASE: Different groupings or thresholds applied to columns */\nSELECT\n    DATE(date_month, 'start of year') AS date_year,\n    CASE\n        WHEN c.region IN ('Americas')\n        THEN 'AMER'\n        WHEN c.region IN ('Europe', 'Africa')\n        THEN 'EMEA'\n        WHEN c.region = 'Asia'\n        THEN 'APAC'\n        ELSE NULL\n    END AS macro_region,\n    IF(a.industry = 'Information Technology', 'IT', 'Non-IT') AS industry_it,\n    SUM(ar.revenue) AS revenue,\n    COUNT(DISTINCT ar.account_id) AS accounts,\n    SUM(ar.revenue) / COUNT(DISTINCT ar.account_id) AS revenue_per_account\nFROM accounts_revenue AS ar\nLEFT JOIN accounts AS a\n    USING (account_id)\nLEFT JOIN countries AS c\n    USING (country)\nWHERE\n    a.industry IN ('Information Technology', 'Telecommunication Services')\n    AND date_month BETWEEN DATE('now', '-24 months') AND DATE('now')\nGROUP BY\n    date_year,\n    macro_region,\n    industry_it" } ] } },
  "007": {
    "direction": "client->server",
    "data": {
      "params": {
        "textDocument": { "uri": "file://{cwd}/tests/inputs/unformatted.sql" } },
      "method": "textDocument/didClose",
      "jsonrpc": "2.0" } },
  "008": {
    "direction": "client->server",
    "data": {
      "id": 2,
      "method": "shutdown",
      "jsonrpc": "2.0" } },
  "009": {
    "direction": "server->client",
    "data": {
      "id": 2,
      "jsonrpc": "2.0",
      "result": null } },
  "010": null }